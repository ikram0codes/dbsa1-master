import{r as o,j as e,L as N}from"./index-C4qijYKD.js";import{b as C,u as E}from"./categorySlice-YaKL1Zx5.js";import{M as k}from"./Message-DtjI_lB4.js";import{B as d}from"./react-toastify.esm-BahYd6mB.js";import{u as B}from"./productSlice-B_do_W5p.js";const R=()=>{const[i,p]=o.useState(""),[s,x]=o.useState(""),[m,u]=o.useState(""),[g,f]=o.useState(0),[h]=B(),[j,{isLoading:w}]=C(),{data:l,isLoading:y,error:c}=E(),t=l&&l.allCategory.find(a=>a._id===i);o.useEffect(()=>{x(t==null?void 0:t.image),u(t==null?void 0:t.name),f(t==null?void 0:t.startingRate)},[i]);const b=async a=>{const n=new FormData;n.append("image",a.target.files[0]);try{const r=await h(n).unwrap();x(r.image)}catch(r){return d.error(r.message)}},v=async a=>{a.preventDefault();const n=new FormData;n.append("name",m),n.append("startingRate",g),n.append("image",s);try{const r=await j({data:n,categoryId:i}).unwrap();r.error?d.error(r.error):(d.success("successfully updated"),p(""))}catch(r){return d.error(r.data.error||r.error)}};return y?e.jsx(N,{}):c?e.jsx(k,{variant:"error",children:c.data.error||c.error}):e.jsxs("div",{className:"w-full font2 min-h-screen p-6",children:[e.jsx("h1",{className:"text-gray-600  text-[22px] font-[400] my-4",children:"Categories"}),e.jsx("div",{className:"w-full mb-4 flex flex-wrap gap-5 ",children:l==null?void 0:l.allCategory.map(a=>e.jsx("button",{onClick:()=>{p(a._id)},className:`border-[#525CEB] font2 uppercase border-[2px] hover:bg-[#525CEB] hover:text-white text-[#525CEB] px-3 py-2 rounded-lg
              tracking-widest`,children:a.name},a._id))}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-gray-600  text-[22px] font-[400] my-6",children:"Update Category"}),i?e.jsxs("div",{className:"w-full min-h-screen flex-wrap flex items-start justify-around smd:justify-center  p-7 md:px-4  smd:p-5 gap-10 md:gap-3",children:[e.jsxs("div",{className:"flex relative w-[320px] group h-[320px] justify-center items-center bg-[#EDEBE9] rounded-[20px]",children:[e.jsx("img",{src:s,alt:"",className:`w-[250px] h-[250px] object-contain ${s?"block":"hidden"} `}),e.jsx("div",{className:"absolute w-[320px] h-[320px] left-0 top-0",children:e.jsxs("label",{className:`w-full overflow-hidden h-full shadow-md shadow-slate-400 bg-[#EDEBE9] smd:bg-transparent flex-wrap text-black ${s?"hidden":"flex"} rounded-[20px] group-hover:flex justify-center items-center gap-2 flex-col px-10 py-8`,children:[s?s.name:"Upload Main Image",e.jsx("input",{type:"file",accept:"image/*",name:"image",onChange:b,className:`${s?"text-black":"hidden"} `})]})})]}),e.jsxs("div",{className:"flex flex-col w-[320px] md:w-[280px] smd:w-[320px] relative  left-0 items-start  gap-5 ",children:[e.jsxs("div",{className:"flex flex-col w-full gap-3 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",className:"focus:outline-none px-3 py-2 border-[2px] border-black rounded-lg",value:m,onChange:a=>{u(a.target.value)}})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsx("label",{htmlFor:"rate",children:"Starting Price"}),e.jsx("input",{type:"number",className:"focus:outline-none px-3 py-2 border-[2px] border-black rounded-lg",value:g,onChange:a=>{f(a.target.value)}})]})]}),e.jsx("button",{onClick:v,className:`w-[160px] bg-[#525CEB] ${w&&"cursor-wait"} h-[60px] py-2 capitalize text-[18px] tracking-wider font-[350] rounded-lg text-white `,children:"Update"})]})]}):e.jsxs("h1",{className:"text-gray-600 font2 font-[400] uppercase",children:[" ","please click on category to update"]})]})]})};export{R as default};
