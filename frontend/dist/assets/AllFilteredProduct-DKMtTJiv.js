import{r,e as v,j as e,L as J}from"./index-C4qijYKD.js";import{A as S,I as V}from"./index-Bz5ORu3N.js";import{R as C}from"./index-csGHe8F0.js";import{e as W,f as X}from"./productSlice-B_do_W5p.js";import{u as Y}from"./categorySlice-YaKL1Zx5.js";import{S as Z}from"./SingleProduct-W1FmJvgI.js";import{B as k}from"./react-toastify.esm-BahYd6mB.js";import{u as ee}from"./brandSlice-JKhWF79c.js";import"./iconBase-BmE9Pv3v.js";import"./index-DT9-m2SJ.js";import"./index-Dx_K-co2.js";import"./index-Bm5FMlgA.js";const me=()=>{var w,N;const[c,h]=r.useState(!1),[P,B]=r.useState(""),[g,L]=r.useState(""),[j,E]=r.useState(""),[A,_]=r.useState(""),[o,x]=r.useState([]),[d,y]=r.useState([]),[n,a]=r.useState(1),{pathname:F}=v(),[Q,b]=r.useState(""),G=()=>{(s==null?void 0:s.numOfProduct)/6>n?a(n+1):k.error("no more items")},O=()=>{n>1?a(n-1):k.error("first page")};r.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[F]);const{search:R}=v(),f=new URLSearchParams(R),u=f.get("category")||"",H=f.get("brand")||"",i=f.get("keyword")||"";r.useEffect(()=>{b(i||"")},[i]),r.useEffect(()=>{i&&a(1)},[i]);const{data:te,isLoading:M}=W(),{data:s,isLoading:I}=X({lowPrice:g,highPrice:j,page:n,category:A,brand:P,keyword:Q}),{data:z,isLoading:K}=Y(),{data:T,isLoading:U}=ee(),$=I||K||U||M,q=(t,l)=>{if(t)x([...o,l.toString()]);else{const m=o.filter(p=>p.toString()!==l.toString());x(m)}};r.useEffect(()=>{u&&x([...o,u])},[]);const D=(t,l)=>{if(t)y([...d,l.toString()]);else{const m=d.filter(p=>p.toString()!==l.toString());y(m)}};return r.useEffect(()=>{const t=o.join(",");_(t),a(1)},[o]),r.useEffect(()=>{const t=d.join(",");B(t),a(1)},[d]),$?e.jsx(J,{}):e.jsxs("div",{className:"w-full sm:flex-col relative flex gap-2 min-h-screen pb-10",children:[e.jsx("div",{className:"w-[48px] hidden relative left-5 mr-4 top-5  smd:flex h-[48px] ",children:e.jsx("button",{onClick:()=>{h(!c)},className:"rounded-lg w-full h-full flex justify-center items-center text-black text-2xl font-extralight  ",children:c?e.jsx(C,{}):e.jsx(S,{})})}),e.jsxs("div",{className:` flex gap-5 p-5 min-w-[300px] border-r-2 border-b-2  flex-col ${c?"smd:flex smd:fixed sm:w-full smd:left-0 smd:top-0 smd:z-[5000] border-r-2 bg-white p-5 min-h-screen ":"smd:hidden"}`,children:[e.jsxs("div",{className:"flex w-full rounded-md  justify-between",children:[e.jsxs("h1",{className:"flex gap-3 text-[16px] font2 font-[400] tracking-wider items-center",children:[e.jsx("span",{className:"text-[18px]",children:e.jsx(V,{})}),"Filters"," "]}),e.jsx("button",{onClick:()=>{h(!1)},className:"rounded-lg w-full h-full hidden smd:flex justify-end items-center text-black text-2xl font-extralight  ",children:c?e.jsx(C,{}):e.jsx(S,{})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-[24px] font2 font-[400] mb-4",children:"Category"}),e.jsx("div",{className:"flex flex-col gap-2",children:z.allCategory.map(t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"checkCat",type:"checkbox",defaultChecked:t._id.toString()===u,onChange:l=>{q(l.target.checked,t._id)}}),e.jsx("label",{htmlFor:"checkCat",className:"",children:t.name})]},t._id))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-[24px] font2 font-[400] mb-4",children:"Brands"}),e.jsx("div",{className:"flex flex-col gap-2",children:T.allBrand.map(t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"checkCat",type:"checkbox",defaultChecked:t._id.toString()===H,onChange:l=>{D(l.target.checked,t._id)}}),e.jsx("label",{htmlFor:"checkCat",className:"",children:t.name})]},t._id))})]}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("h1",{className:"text-[24px] font2 font-[400] mb-4",children:"Price"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"text-[15px] font-[300] font2",children:"Min Price"}),e.jsx("input",{type:"number",value:g,onChange:t=>{L(t.target.value),a(1)},className:"border-[2px] w-[150px] border-gray-400 rounded-md px-3 py-1 focus:outline-none "})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"text-[15px] font-[300] font2",children:"Max Price"}),e.jsx("input",{type:"number",value:j,onChange:t=>{E(t.target.value),a(1)},className:"border-[2px] w-[150px] border-gray-400 rounded-md px-3 py-1 focus:outline-none "})]})]})]})]}),e.jsx("div",{className:"w-full min-h-[300px] p-4 py-6 sm:px-1 usm:px-0 flex flex-col items-center ",children:((w=s==null?void 0:s.products)==null?void 0:w.length)===0?e.jsx("div",{className:"w-full h-full flex text-[28px] justify-center py-10 font2  ",children:"No item"}):e.jsxs("div",{className:"flex gap-5 w-full h-full flex-col justify-between",children:[e.jsx("div",{className:"w-full h-full flex flex-wrap justify-center gap-5 ",children:(N=s==null?void 0:s.products)==null?void 0:N.map(t=>e.jsx("div",{"data-aos":"slide-up","data-aos-duration":"500","data-aos-mirror":"false",className:"w-[250px] usm:w-full ",children:e.jsx(Z,{product:t},t._id)},t._id))}),e.jsxs("div",{className:"w-full flex justify-between items-center gap-4 mt-6 p-8 flex-wrap",children:[e.jsxs("div",{className:"uppercase text-gray-400 font2 font-[500] ",children:["total ",s==null?void 0:s.numOfProduct," Products in"," ",Math.floor((s==null?void 0:s.numOfProduct)/6)+1," pages"," "]}),e.jsxs("div",{className:"gap-3 px-2 flex justify-end",children:[e.jsx("button",{onClick:O,className:"rounded-md bg-[#525CEB] text-white p-2",children:"Prev"}),e.jsx("button",{className:"w-[40px] text-[white] p-2 h-[40px] rounded-md bg-[#525CEB]",children:n}),e.jsx("button",{onClick:G,className:"rounded-md bg-[#525CEB] text-white p-2",children:"Next"})]})]})]})})]})};export{me as default};
