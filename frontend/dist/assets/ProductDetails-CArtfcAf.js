import{f as Q,r as n,e as z,d as $,u as H,b as Y,j as e,L as V,a as q,h as G}from"./index-C4qijYKD.js";import{b as U,c as W}from"./productSlice-B_do_W5p.js";import{F as J}from"./index-DT9-m2SJ.js";import{B as r}from"./react-toastify.esm-BahYd6mB.js";import{M as K}from"./Message-DtjI_lB4.js";import{R as b}from"./SingleProduct-W1FmJvgI.js";import{C as O}from"./index-wC-6xrTz.js";import{T as X}from"./TopProducts-CqDBknZ2.js";import{M as Z,a as ee}from"./index-Bm5FMlgA.js";import"./iconBase-BmE9Pv3v.js";import"./index-Dx_K-co2.js";const me=()=>{var N,y;const{id:o}=Q(),[C,j]=n.useState(null),[x,u]=n.useState(1),[m,E]=n.useState(!1),[c,g]=n.useState(!1),[w,d]=n.useState(""),{pathname:B}=z(),k=$(),I=H(),[v,p]=n.useState(0),{userInfo:l}=Y(t=>t.auth),{data:s,isLoading:_,error:f}=U(o),[S,{isLoading:F}]=W(),D=()=>{x<s.countInStock?u(x+1):r.error("no more items in stock")},A=()=>{x>1&&u(x-1)},L=()=>{I(G({...s,qty:x})),r.success("item added to cart")};n.useEffect(()=>{var t;if(j(s==null?void 0:s.mainImage),p(0),d(""),l&&s){const[a]=(t=s==null?void 0:s.review)==null?void 0:t.filter(i=>i.user.toString()===(l==null?void 0:l._id.toString()));d(a==null?void 0:a.comment),p(a==null?void 0:a.rating)}else d("")},[s]);const M=async t=>{var a;if(t.preventDefault(),!l)k(`/login?redirect=productDetails/${o}`);else try{const i=await S({data:{rating:v,comment:w},productId:o}).unwrap();i.error?r.error(i.error):r.success("review added successfully")}catch(i){r.error(((a=i==null?void 0:i.data)==null?void 0:a.error)||i.error)}},h=t=>{j(t)};return n.useEffect(()=>{document.title=s==null?void 0:s.name,document.description=s.description,window.scrollTo({top:0,left:0,behavior:"smooth"})},[B]),_?e.jsx(V,{}):f?e.jsx(K,{variant:"error",children:f.data.error||f.error}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font1 w-full px-[80px]  md:px-[30px]  sm:px-[5px] vsm:px-[0px] mt-[80px] sm:mt-[50px] relative overflow-hidden",children:e.jsxs("div",{className:"w-full flex justify-center items-start pdsm:flex-col",children:[e.jsxs("div",{className:"w-full min-h-[350px] flex flex-col gap-5 col-span-3 px-4",children:[e.jsx("div",{"data-aos":"zoom-in-down",className:"w-full min-h-[350px] flex justify-center items-center py-3 bg-[#EDEBE9] rounded-[20px]",children:e.jsx("img",{src:C,alt:s==null?void 0:s.name,className:"w-[280px] h-[280px] object-contain drop-shadow-[0_35px_35px_rgba(0,0,0,0.35)] "})}),e.jsxs("div",{className:"w-full sm:overflow-scroll col-span-3 flex gap-4 px-4 justify-start ",children:[(s==null?void 0:s.mainImage)&&e.jsx("div",{onClick:()=>{h(s==null?void 0:s.mainImage)},className:"w-[175px] h-[175px] cursor-pointer sm:min-w-[175px] rounded-[20px] flex justify-center items-center bg-[#EDEBE9]",children:e.jsx("img",{src:s==null?void 0:s.mainImage,alt:s==null?void 0:s.name,className:"w-[140px] h-[140px]  object-contain drop-shadow-[0_35px_35px_rgba(0,0,0,0.35)] "})}),(s==null?void 0:s.sideImage1)&&e.jsx("div",{onClick:()=>{h(s==null?void 0:s.sideImage1)},className:"w-[175px] h-[175px] cursor-pointer  sm:min-w-[175px] rounded-[20px] flex justify-center items-center bg-[#EDEBE9]",children:e.jsx("img",{src:s==null?void 0:s.sideImage1,alt:s==null?void 0:s.name,className:"w-[140px] h-[140px] object-contain drop-shadow-[0_35px_35px_rgba(0,0,0,0.35)] "})}),(s==null?void 0:s.sideImage2)&&e.jsx("div",{onClick:()=>{h(s==null?void 0:s.sideImage2)},className:"w-[175px] h-[175px] cursor-pointer sm:min-w-[175px] rounded-[20px] flex justify-center items-center bg-[#EDEBE9]",children:e.jsx("img",{src:s==null?void 0:s.sideImage2,alt:s==null?void 0:s.name,className:"w-[140px] h-[140px] object-contain drop-shadow-[0_35px_35px_rgba(0,0,0,0.35)] "})})]}),e.jsxs("div",{className:"flex justify-start items-center w-full h-max flex-col",id:"info",children:[e.jsxs("span",{className:"",style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[e.jsx("h3",{className:"text-[30px] font-bold",children:"Products Details"}),e.jsx("button",{className:"text-[#525CEB]",onClick:()=>{g(!c)},children:c?e.jsx(Z,{className:"text-[40px]"}):e.jsx(ee,{className:"text-[40px]"})})]}),c?e.jsx("div",{dangerouslySetInnerHTML:{__html:s.information}}):e.jsx("div",{className:"w-full",style:{height:"5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("p",{className:"cursor-pointer text-[#9CACCB] text-[18px] ",onClick:()=>{g(!c)},children:s.information!==""?"View Product Details...":"No Product Details"})})]})]}),e.jsxs("div",{className:"w-full h-max flex justify-start items-center flex-col gap-[40px]",children:[e.jsx("div",{className:"w-full flex justify-between sm:overflow-scroll col-span-3  ex gap-4 px-4  smd:order-2",children:e.jsxs("div",{className:"w-full col-span-2 smd:col-span-3 min-h-[200px] smd:order-3 px-3",children:[e.jsx("h1",{className:"text-[36px] font2 font-[600] md:text-[30px] smd:text-[36px] ",children:s==null?void 0:s.name}),e.jsxs("p",{className:"text-[18px] text-[#82828B] font2 uppercase font-[500] mt-[21px] ",children:[" ","by ",(N=s==null?void 0:s.brand)==null?void 0:N.name]}),e.jsxs("div",{className:"flex mt-2 gap-6 ",children:[e.jsxs("div",{className:"min-w-[114px] text-[20px] weight-[500] font2 h-[44px] flex justify-center items-center rounded-[8px] px-2 text-[#525CEB] bg-[#525ceb21] ",children:["R ",s==null?void 0:s.price.toFixed(2)]}),e.jsxs("div",{className:"",children:[e.jsxs("p",{className:"text-[#FF000F] font-[500] text-[16px] ",children:["Sale ",s.discount,"% off"]}),e.jsx("p",{className:"text-[14px] font-[400] text-[#82828B]",children:"Inclusive of all Taxes"})]})]}),e.jsxs("div",{className:"text-[#82828B] text-[16px] tracking-wider mt-4 font-[400]",children:[m?s.description:`${s.description.substring(0,300)}...`,s.description.length>300&&e.jsx("button",{className:"text-[#525CEB]",onClick:()=>{E(!m)},children:m?"Show Less":"Read More"})]}),e.jsxs("div",{className:"mt-10 flex gap-8 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-[#82828B] text-[14px] font-[500]",children:"QTY"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:A,className:"w-[24px] h-[24px] bg-[#525CEB] flex justify-center items-center text-white text-[18px] rounded-md  ",children:"-"}),x,e.jsx("button",{onClick:D,className:"w-[24px] h-[24px] bg-[#FF000F] flex justify-center items-center text-white text-[16px] rounded-md  ",children:"+"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"",children:e.jsx("button",{onClick:L,className:"w-[140px] bg-[#525CEB] py-3 capitalize text-[18px] tracking-wider font-[350] rounded-lg text-white ",children:"Add to cart"})}),(l==null?void 0:l.isAdmin)&&e.jsx("button",{className:"",children:e.jsx(q,{to:`/adminMenu/updateProduct/${s._id}`,className:"w-[140px] flex justify-center items-center bg-[#525CEB] py-3 capitalize text-[18px] tracking-wider font-[350] rounded-lg text-white ",children:"Update"})})]})]})]})}),e.jsx("div",{className:"min-w-full col-span-2 smd:col-span-3 smd:order-5 row-span-2",children:e.jsxs("div",{className:"min-w-full h-full shadow-md sm:shadow-none max-h-[500px] shadow-slate-500 rounded-xl sm:rounded-none overflow-y-scroll",children:[e.jsxs("div",{className:"w-full min-h-[163px] border-gray-300 border-b-[1px] gap-2 flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-[24px] font1 font-[700]",children:"Reviews"}),e.jsxs("div",{className:"flex flex-wrap px-2 items-center justify-center py-3 bg-[#F6FAFB] gap-3",children:[e.jsx("div",{className:"",children:e.jsx(b,{value:s==null?void 0:s.rating})}),e.jsxs("p",{className:"text-[#7A7A7A] text-[18px] font-[300]",children:[s==null?void 0:s.numReviews," reviews"]})]})]}),(s==null?void 0:s.review.length)>0?e.jsx("div",{className:"w-full flex last:border-b-[0px] justify-center items-center  flex-col  overflow-x-clip",children:(y=s==null?void 0:s.review)==null?void 0:y.map((t,a)=>{const{comment:i,email:R,name:P,rating:T}=t;return e.jsxs("div",{className:"w-full min-h-[163px] overflow-scroll py-3 flex flex-col justify-start gap-4 px-4  border-gray-300 border-t-[1px]",children:[e.jsxs("div",{className:"flex justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex justify-center gap-2  items-center",children:[e.jsx("div",{className:"text-[44px] text-[#525CEB]",children:e.jsx(O,{})}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("div",{className:"text-[20px] font-[600] capitalize tracking-wider",children:P}),e.jsx("div",{className:"text-[#7A7A7A] text-[17px] font-[400]",children:R})]})]}),e.jsx("div",{className:"",children:e.jsx(b,{value:T})})]}),e.jsx("div",{className:"text-[#82828B] text-[15px] line-clamp-5 tracking-wider font-[400] ",children:t.comment})]},a)})}):e.jsx("div",{className:"w-full mt-[20px] text-gray-600 justify-center items-center flex text-xl",children:"No review Yet"})]})}),e.jsxs("div",{className:"col-span-3 w-full px-4 flex smd:order-4 flex-col gap-3  ",children:[e.jsxs("div",{className:"w-full flex justify-between  ",children:[e.jsx("span",{className:"text-[24px] font2 font-[500]",children:"Write a Review"}),e.jsxs("div",{className:"focus:outline-none tracking-widest border-[1px] flex justify-center items-center gap-1 border-gray-600 px-2 py-1 rounded-md",children:[e.jsxs("select",{value:v,onChange:t=>{p(t.target.value)},className:"focus:outline-none",children:[e.jsx("option",{defaultValue:0,value:0,id:"0",children:"0"}),e.jsx("option",{value:1,id:"1",children:"1"}),e.jsx("option",{value:2,id:"2",children:"2"}),e.jsx("option",{value:3,id:"3",children:"3"}),e.jsx("option",{value:4,id:"4",children:"4"}),e.jsx("option",{value:5,id:"5",children:"5"})]}),"/5"," ",e.jsx("span",{className:"text-yellow-400",children:e.jsx(J,{})})," "]})]}),e.jsx("div",{className:"w-full",children:e.jsx("textarea",{type:"text",placeholder:"Your Review",value:w,onChange:t=>{d(t.target.value)},className:"border-[2px] border-[#AFB1BD] w-full h-[150px] rounded-lg tracking-wider focus:outline-none p-4 "})}),e.jsx("div",{className:"w-full flex gap-6 justify-end",children:e.jsx("button",{onClick:M,className:`w-[30%] bg-[#525CEB] text-[16px] font-[500] font2 py-3 text-white rounded-md ${F&&"cursor-wait"}`,children:"Submit"})})]})]})]})}),e.jsx("div",{className:"w-[100vw]",children:e.jsx(X,{})})]})};export{me as default};
